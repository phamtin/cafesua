{"componentChunkName":"component---src-template-blog-js","path":"/blog/cach-javascript-hoat-dong-behind-the-sceneibb","result":{"data":{"contentfulBlogPost":{"title":"CÁCH JAVASCRIPT HOẠT ĐỘNG BEHIND THE SCENE","publishedDate":"September 28th, 2019","body":{"json":{"nodeType":"document","data":{},"content":[{"nodeType":"heading-3","content":[{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"1. Mở đầu","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Chào mọi người, chúng ta đều biết rằng Javascript là một trong các ngôn ngữ được sử dụng rộng rãi nhất hiện nay, thậm chí mọi người còn nói rằng Javascript đang ăn cả thế giới, Javascript xuất hiện trong hầu hết các dự án từ Front-end đến Back-end. Làm việc với Javascript khá nhiều nhưng có khi nào các bạn tự hỏi nó hoạt động như thế nào chưa và cách mà ngôn ngữ này được thực thi trong môi trường Browser, cùng tìm hiểu trong bài viết hôm nay nhé.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"2. Javascript parsers và engines","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Như chúng ta đã biết, Javascript luôn được thực thi trong các môi trường Browser như Google Chrome, Safari, Firefox, ...ngoài ra nó còn được chạy trong môi trường Node.js, tuy nhiên bài viết này sẽ chỉ tập trung vào các browser.\n\nKhi chúng ta viết code Javascript và chạy đoạn code đó, một ","marks":[],"data":{}},{"nodeType":"text","value":"javascript engine","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" sẽ nhận đoạn mã đó mà thực thi nó, trong trường hợp bạn chưa biết thì ","marks":[],"data":{}},{"nodeType":"text","value":"javascript engine","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" là một chương trình để thực thi code được viết bằng Javascript, một số ","marks":[],"data":{}},{"nodeType":"text","value":"javascript engine","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" nổi tiếng như Google's V8 Engine, SpiderMonkey, JavascriptCore,... Các Engine này sẽ nhận vào code được viết bằng Javascript và sẽ phân tích từng dòng một, nếu có lỗi về syntax, nó sẽ ném ra lỗi và chương trình dừng hoạt động, nếu đoạn code đó đã được sửa hết lỗi Engine sẽ chuyển các đoạn mã đó thành mã máy để máy tính có thể hiểu và thực thi chúng. Các Engine khác nhau sẽ có chút khác biệt về cách hoạt động, nhưng nó đều có vai trò giống nhau là môi trường thực thi các đoạn mã được viết bằng Javascript.\n\n","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-asset-block","content":[],"data":{"target":{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"c1llxrfmmhd1b","contentful_id":"1llxrfmmhd1b"}},"id":"c5oLlIVHPq1aBmlE42b6NUW","type":"Asset","createdAt":"2020-05-03T13:10:43.250Z","updatedAt":"2020-05-03T13:53:48.536Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment","contentful_id":"master"}},"revision":2,"contentful_id":"5oLlIVHPq1aBmlE42b6NUW"},"fields":{"title":{"en-US":"js-engines"},"file":{"en-US":{"url":"//images.ctfassets.net/1llxrfmmhd1b/5oLlIVHPq1aBmlE42b6NUW/e829c242042f3b0324b14064fa3024fb/jsengine.png","details":{"size":6434,"image":{"width":786,"height":196}},"fileName":"jsengine.png","contentType":"image/png"}}}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"3. Execution context và Execution stack","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Vậy là chúng ta đã biết các đoạn code Javascript được chạy trong một môi trường (ở đây là Browser) và các môi trường đó còn được gọi là các ","marks":[],"data":{}},{"nodeType":"text","value":"Execution context","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" (EC), để dễ hình dung, hãy tưởng tượng ","marks":[],"data":{}},{"nodeType":"text","value":"Execution context","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" như một container chứa code của chúng ta như các biến, function. Mặc định, các đoạn code không nằm trong bất kỳ một function nào đều nằm trong ","marks":[],"data":{}},{"nodeType":"text","value":"Global Execution context","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" (GEC) và được gán trực tiếp với ","marks":[],"data":{}},{"nodeType":"text","value":"global object","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", và ","marks":[],"data":{}},{"nodeType":"text","value":"global object","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" trong môi trường Browser chính là ","marks":[],"data":{}},{"nodeType":"text","value":"window","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" object!\n\n","marks":[],"data":{}},{"nodeType":"text","value":"var helloBuddy;\nhelloBuddy === window.helloBuddy\n// true\n","marks":[{"type":"code"}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Khi đã xác định được EC, giờ hãy cùng đi đến phần thú vị khác đó là ","marks":[],"data":{}},{"nodeType":"text","value":"Execution stack","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", đó là một cấu trúc dữ liệu nơi mà một EC mới được đẩy lên trên GEC nếu có một function nào đó được thực thi, và cứ tiếp tục như vậy, nếu trong function đó lại có môt function khác cần thực thi, thì function \"con\" đó sẽ tạo ra một EC mới ở trên EC trước đó, như hình dưới đây:\n\n","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-asset-block","content":[],"data":{"target":{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"c1llxrfmmhd1b","contentful_id":"1llxrfmmhd1b"}},"id":"c1Ylzirtr6e9ZCUbD4ALSrD","type":"Asset","createdAt":"2020-05-03T13:13:10.400Z","updatedAt":"2020-05-03T13:54:01.234Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment","contentful_id":"master"}},"revision":2,"contentful_id":"1Ylzirtr6e9ZCUbD4ALSrD"},"fields":{"title":{"en-US":"EC"},"file":{"en-US":{"url":"//images.ctfassets.net/1llxrfmmhd1b/1Ylzirtr6e9ZCUbD4ALSrD/aae76816684c5a30bd3fb6c58f59f317/EX.png","details":{"size":22112,"image":{"width":966,"height":480}},"fileName":"EX.png","contentType":"image/png"}}}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Khi các Engine gặp biến a và function one(), nó sẽ được chưa trong GEC vì nó không nằm trong bất kỳ một function nào, khi thực thi function one(), nó tạo một EC nằm trên GEC, tiếp tục, trng function one() có 2 biến là b và c, cả 2 biến này đều nằm trong ","marks":[],"data":{}},{"nodeType":"text","value":"one() execution context","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" , đến dòng thực thi function two() nó sẽ lại sinh ra một EC khác nằm trên ","marks":[],"data":{}},{"nodeType":"text","value":"one() execution context","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" . và sau khi đã thực hiện xong, các EC của one() và two() sẽ mất đi và chỉ còn lại GEC.\n","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"\n","marks":[],"data":{}},{"nodeType":"text","value":"\n3. ","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"Creation phases, Execution phases và Hoisting","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Ở phần trên chúng ta đã tìm hiểu khi nào các EC được tạo và bây giờ chúng ta sẽ tìm hiểu về cách mà nó được tạo ra, một EC có thể xem như một object và object đó bao gồm 3 thuộc tính:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Variable Object (VO)","marks":[],"data":{}}],"data":{}}]},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Scope Chain","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"từ khóa \"this\"","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"heading-5","content":[{"nodeType":"text","data":{},"value":"1. Variable Object (VO)","marks":[]}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Ta đã biết Khi một function được gọi bên trong một fuction khác, một EC mới được tạo ra, quá trình này gồm 2 phần gọi là ","marks":[],"data":{}},{"nodeType":"text","value":"Creation phase","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" và ","marks":[],"data":{}},{"nodeType":"text","value":"Execution phase","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":". Tất cả các thuộc tính như VO, Scope Chain và từ khóa \"this\" được hình thành ở phần ","marks":[],"data":{}},{"nodeType":"text","value":"Creation","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", sau đó đến phần ","marks":[],"data":{}},{"nodeType":"text","value":"Execution","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" là lúc mà các đoạn code sẽ được thực thi.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Khi code được thực thi, mỗi khi ta khai báo một function, một thuộc tính sẽ được tạo ra trong VO và thuộc tính này sẽ trỏ đến function đó, nghĩa là các function sẽ được lưu giữ trong các VO trước khi đoạn code trong function đó được thực hiện hay nói cách khác ta có thể sử dụng function đó trước khi chúng ta thực sự khai báo. Nhưng khi ta khai báo một biến, một thuộc tính sẽ được tạo ra trong VO và thuộc tính này sẽ có giá trị là ","marks":[],"data":{}},{"nodeType":"text","value":"undefined","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", trong Javascript 2 quá trình này gọi là ","marks":[],"data":{}},{"nodeType":"text","value":"Hoisting","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":".","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"\n\n","marks":[],"data":{}},{"nodeType":"text","value":"// khai báo function\nsayHello(\"Nguyen Van A\");  // Hello Nguyen Van A\nfunction sayHello(friend) {\n    console.log(\"Hello \" + friend);\n}\n\n// Khai báo biến\nconsole.log(year);  //undefined\nconst year = 2019;\n\n","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"\n","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-5","content":[{"nodeType":"text","value":"2. Scope chain","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Scope là phạm vi mà một biến có thể được truy cập tới, trong mỗi function có một Scope của riêng nó, nơi mà các biến được khai báo\n\n","marks":[],"data":{}},{"nodeType":"text","value":"var a = 'apple'\none()\nfunction one() {\n     var b = 'ball'\n     two()\n     function two() {\n         var c = 'cat'\n        console.log(a + b + c)\n     }\n}\n\n","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"\n\n\n","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Đoạn code trên sẽ in ra kết quả là appleballcat vì hàm two() có thể truy cập tới các biến được khai báo bên ngoài nó, như vậy scope của hàm two() bao gồm các biến của chính nó và các biến được lưu trữ trong VO của one() và Global VO, sơ đồ dưới đây sẽ giúp bạn dễ hình dung hơn:\n\n","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-asset-block","content":[],"data":{"target":{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"c1llxrfmmhd1b","contentful_id":"1llxrfmmhd1b"}},"id":"c3uZnKKVM1C5AS3KTUb7wDP","type":"Asset","createdAt":"2020-05-03T13:17:33.330Z","updatedAt":"2020-05-03T13:54:14.557Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment","contentful_id":"master"}},"revision":2,"contentful_id":"3uZnKKVM1C5AS3KTUb7wDP"},"fields":{"title":{"en-US":"scope-chaine"},"file":{"en-US":{"url":"//images.ctfassets.net/1llxrfmmhd1b/3uZnKKVM1C5AS3KTUb7wDP/bfd389ee0564769630c7c62688a65a53/scopechaine.png","details":{"size":31303,"image":{"width":825,"height":328}},"fileName":"scopechaine.png","contentType":"image/png"}}}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-5","content":[{"nodeType":"text","value":"3. \"this\" keyword","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Mỗi một EC mới được tạo ra đều có một biến \"this\", trong một ","marks":[],"data":{}},{"nodeType":"text","value":"Regular function call","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" biến \"this\" được trỏ tới GEC, là ","marks":[],"data":{}},{"nodeType":"text","value":"window","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" object trong browser. Biến \"this\" chỉ thực sự trỏ tới một object khi nó nằm trong một ","marks":[],"data":{}},{"nodeType":"text","value":"Method call","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" của object đó. Ta xét ví dụ sau đây:","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"\n\n","marks":[],"data":{}},{"nodeType":"text","value":"//  Regular function call\nsayHello();  //  Window {postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window, …}\nfunction sayHello() {\n    console.log(this);\n}\n\n// Method call\nconst car = {\n    name: 'Coupe',\n    model: 2018,\n    information: function() {\n        console.log(this);\n    }\n}\ncar.information(); // {name: \"Coupe\", model: 2018, information: ƒ}\n\n","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"\n\nNhư các bạn thấy ở ","marks":[],"data":{}},{"nodeType":"text","value":"Method call","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"text","value":"this","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" trỏ tới object ","marks":[],"data":{}},{"nodeType":"text","value":"car","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" còn ","marks":[],"data":{}},{"nodeType":"text","value":"Regular function call","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" thì không mặc dù nó nằm trong function gọi nó.\n","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"\n5. Tổng kết","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Đến đây hy vọng bạn hiểu được cách mà javascript hoạt động trong browser và hiểu hơn cách mà mỗi dòng code của chúng ta được thực hiện. Cám ơn các bạn đã theo dõi bài viết của mình ","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Tham Khảo","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"https://medium.com/@sharangohar/how-javascript-works-behind-the-scenes-fb65b81d6e1c","marks":[],"data":{}}],"data":{"uri":"https://medium.com/@sharangohar/how-javascript-works-behind-the-scenes-fb65b81d6e1c"}},{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"\n\n","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}}],"data":{}}]}}}},"pageContext":{"slug":"cach-javascript-hoat-dong-behind-the-sceneibb"}}}